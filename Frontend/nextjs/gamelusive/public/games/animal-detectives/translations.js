// Translation data for Animal Detectives Game
const translations = {
  en: {
    // Page title and header
    title: "Animal Detectives - Memory Game for Primary School",
    gameTitle: "Animal Detectives",
    gameSubtitle: "Match animal names with their habitats and characteristics!",
    
    // Language selector
    selectLanguage: "Select Language:",
    
    // How to play section
    howToPlay: "How to Play",
    instruction1: "1. Flip cards to find matching animal names, habitats, and characteristics.",
    instruction2: "2. Match all sets to complete the game.",
    instruction3: "3. Use what you've learned to write a story about your favorite animals!",
    
    // Level selection
    selectLevel: "Select Level:",
    easyLevel: "Easy (Grade 1-2)",
    advancedLevel: "Advanced (Grade 3-4)",
    
    // Game stats
    pairsFound: "Pairs Found",
    attempts: "Attempts",
    time: "Time",
    seconds: "s",
    
    // Controls
    restartGame: "Restart Game",
    writeStory: "Write a Story",
    
    // Animal data - Easy level
    easyAnimals: [
      { name: "Lion", habitat: "Savanna", characteristic: "King Of Jungle" },
      { name: "Elephant", habitat: "Grasslands", characteristic: "Has a trunk" },
      { name: "Giraffe", habitat: "Woodland", characteristic: "Long neck" },
      { name: "Penguin", habitat: "Antarctica", characteristic: "Black and white" }
    ],
    
    // Animal data - Hard level
    hardAnimals: [
      { name: "Tiger", habitat: "Jungle", characteristic: "Orange with stripes" },
      { name: "Polar Bear", habitat: "Arctic", characteristic: "White fur" },
      { name: "Kangaroo", habitat: "Australia", characteristic: "Has a pouch" },
      { name: "Dolphin", habitat: "Ocean", characteristic: "Breathes air" },
      { name: "Eagle", habitat: "Mountains", characteristic: "Sharp talons" },
      { name: "Frog", habitat: "Pond", characteristic: "Can jump far" }
    ],
    
    // Card labels
    habitat: "Habitat",
    trait: "Trait",
    
    // Animal info
    animalFacts: "Animal Facts",
    
    // Story section
    createStory: "Create Your Animal Story",
    storyPrompt: "Use what you learned about animals to write a short story!",
    storyPlaceholder: "Once upon a time in the forest...",
    saveStory: "Save Story",
    
    // Feedback messages
    gameComplete: "Congratulations! You completed the game in {attempts} attempts and {time} seconds!",
    storySaved: "Great job! Your animal story has been saved! ({timestamp})",
    storyError: "Please write a story before saving!"
  },
  
  tr: {
    // Page title and header
    title: "Hayvan Dedektifleri - İlkokul İçin Hafıza Oyunu",
    gameTitle: "Hayvan Dedektifleri",
    gameSubtitle: "Hayvan isimlerini yaşam alanları ve özellikleriyle eşleştirin!",
    
    // Language selector
    selectLanguage: "Dil Seçin:",
    
    // How to play section
    howToPlay: "Nasıl Oynanır",
    instruction1: "1. Kartları çevirerek hayvan isimleri, yaşam alanları ve özelliklerini eşleştirin.",
    instruction2: "2. Oyunu tamamlamak için tüm setleri eşleştirin.",
    instruction3: "3. Öğrendiklerinizi kullanarak en sevdiğiniz hayvanlar hakkında bir hikaye yazın!",
    
    // Level selection
    selectLevel: "Seviye Seçin:",
    easyLevel: "Kolay (1-2. Sınıf)",
    advancedLevel: "İleri (3-4. Sınıf)",
    
    // Game stats
    pairsFound: "Bulunan Çiftler",
    attempts: "Deneme",
    time: "Süre",
    seconds: "s",
    
    // Controls
    restartGame: "Oyunu Yeniden Başlat",
    writeStory: "Hikaye Yaz",
    
    // Animal data - Easy level
    easyAnimals: [
      { name: "Aslan", habitat: "Savan", characteristic: "Ormanın Kralı" },
      { name: "Fil", habitat: "Çayırlar", characteristic: "Hortumu var" },
      { name: "Zürafa", habitat: "Orman", characteristic: "Uzun boynu" },
      { name: "Penguen", habitat: "Antarktika", characteristic: "Siyah beyaz" }
    ],
    
    // Animal data - Hard level
    hardAnimals: [
      { name: "Kaplan", habitat: "Orman", characteristic: "Çizgili turuncu" },
      { name: "Kutup Ayısı", habitat: "Arktik", characteristic: "Beyaz tüylü" },
      { name: "Kanguru", habitat: "Avustralya", characteristic: "Kesesi var" },
      { name: "Yunus", habitat: "Okyanus", characteristic: "Hava solur" },
      { name: "Kartal", habitat: "Dağlar", characteristic: "Keskin pençeli" },
      { name: "Kurbağa", habitat: "Gölet", characteristic: "Uzağa zıplar" }
    ],
    
    // Card labels
    habitat: "Yaşam Alanı",
    trait: "Özellik",
    
    // Animal info
    animalFacts: "Hayvan Bilgileri",
    
    // Story section
    createStory: "Hayvan Hikayen Oluştur",
    storyPrompt: "Hayvanlar hakkında öğrendiklerini kullanarak kısa bir hikaye yaz!",
    storyPlaceholder: "Bir zamanlar ormanda...",
    saveStory: "Hikayeyi Kaydet",
    
    // Feedback messages
    gameComplete: "Tebrikler! Oyunu {attempts} denemede ve {time} saniyede tamamladınız!",
    storySaved: "Harika! Hayvan hikayen kaydedildi! ({timestamp})",
    storyError: "Lütfen kaydetmeden önce bir hikaye yazın!"
  },
  
  pl: {
    // Page title and header
    title: "Detektywi Zwierząt - Gra Pamięciowa dla Szkoły Podstawowej",
    gameTitle: "Detektywi Zwierząt",
    gameSubtitle: "Dopasuj nazwy zwierząt do ich siedlisk i cech charakterystycznych!",
    
    // Language selector
    selectLanguage: "Wybierz język:",
    
    // How to play section
    howToPlay: "Jak grać",
    instruction1: "1. Odwracaj karty, aby znaleźć pasujące nazwy zwierząt, siedliska i cechy.",
    instruction2: "2. Dopasuj wszystkie zestawy, aby ukończyć grę.",
    instruction3: "3. Wykorzystaj to, czego się nauczyłeś, aby napisać historię o swoich ulubionych zwierzętach!",
    
    // Level selection
    selectLevel: "Wybierz poziom:",
    easyLevel: "Łatwy (Klasa 1-2)",
    advancedLevel: "Zaawansowany (Klasa 3-4)",
    
    // Game stats
    pairsFound: "Znalezione pary",
    attempts: "Próby",
    time: "Czas",
    seconds: "s",
    
    // Controls
    restartGame: "Restart gry",
    writeStory: "Napisz historię",
    
    // Animal data - Easy level
    easyAnimals: [
      { name: "Lew", habitat: "Sawanna", characteristic: "Król dżungli" },
      { name: "Słoń", habitat: "Łąki", characteristic: "Ma trąbę" },
      { name: "Żyrafa", habitat: "Las", characteristic: "Długa szyja" },
      { name: "Pingwin", habitat: "Antarktyka", characteristic: "Czarno-biały" }
    ],
    
    // Animal data - Hard level
    hardAnimals: [
      { name: "Tygrys", habitat: "Dżungla", characteristic: "Pomarańczowy w paski" },
      { name: "Niedźwiedź polarny", habitat: "Arktyka", characteristic: "Białe futro" },
      { name: "Kangur", habitat: "Australia", characteristic: "Ma torbę" },
      { name: "Delfin", habitat: "Ocean", characteristic: "Oddycha powietrzem" },
      { name: "Orzeł", habitat: "Góry", characteristic: "Ostre szpony" },
      { name: "Żaba", habitat: "Staw", characteristic: "Daleko skacze" }
    ],
    
    // Card labels
    habitat: "Siedlisko",
    trait: "Cecha",
    
    // Animal info
    animalFacts: "Fakty o zwierzętach",
    
    // Story section
    createStory: "Stwórz swoją historię o zwierzętach",
    storyPrompt: "Wykorzystaj to, czego się nauczyłeś o zwierzętach, aby napisać krótką historię!",
    storyPlaceholder: "Dawno, dawno temu w lesie...",
    saveStory: "Zapisz historię",
    
    // Feedback messages
    gameComplete: "Gratulacje! Ukończyłeś grę w {attempts} próbach i {time} sekundach!",
    storySaved: "Świetna robota! Twoja historia o zwierzętach została zapisana! ({timestamp})",
    storyError: "Proszę napisać historię przed zapisaniem!"
  },
  
  nl: {
    // Page title and header
    title: "Dierendetectives - Geheugenspel voor de Basisschool",
    gameTitle: "Dierendetectives",
    gameSubtitle: "Match dierennamen met hun leefgebieden en kenmerken!",
    
    // Language selector
    selectLanguage: "Selecteer taal:",
    
    // How to play section
    howToPlay: "Hoe te spelen",
    instruction1: "1. Draai kaarten om om passende dierennamen, leefgebieden en kenmerken te vinden.",
    instruction2: "2. Match alle sets om het spel te voltooien.",
    instruction3: "3. Gebruik wat je hebt geleerd om een verhaal te schrijven over je favoriete dieren!",
    
    // Level selection
    selectLevel: "Selecteer niveau:",
    easyLevel: "Makkelijk (Groep 3-4)",
    advancedLevel: "Gevorderd (Groep 5-6)",
    
    // Game stats
    pairsFound: "Gevonden paren",
    attempts: "Pogingen",
    time: "Tijd",
    seconds: "s",
    
    // Controls
    restartGame: "Herstart spel",
    writeStory: "Schrijf een verhaal",
    
    // Animal data - Easy level
    easyAnimals: [
      { name: "Leeuw", habitat: "Savanne", characteristic: "Koning van de jungle" },
      { name: "Olifant", habitat: "Graslanden", characteristic: "Heeft een slurf" },
      { name: "Giraffe", habitat: "Bos", characteristic: "Lange nek" },
      { name: "Pinguïn", habitat: "Antarctica", characteristic: "Zwart en wit" }
    ],
    
    // Animal data - Hard level
    hardAnimals: [
      { name: "Tijger", habitat: "Jungle", characteristic: "Oranje met strepen" },
      { name: "IJsbeer", habitat: "Arctisch", characteristic: "Witte vacht" },
      { name: "Kangoeroe", habitat: "Australië", characteristic: "Heeft een buidel" },
      { name: "Dolfijn", habitat: "Oceaan", characteristic: "Ademt lucht" },
      { name: "Adelaar", habitat: "Bergen", characteristic: "Scherpe klauwen" },
      { name: "Kikker", habitat: "Vijver", characteristic: "Kan ver springen" }
    ],
    
    // Card labels
    habitat: "Leefgebied",
    trait: "Eigenschap",
    
    // Animal info
    animalFacts: "Dierenfeitjes",
    
    // Story section
    createStory: "Maak je dierenverhaal",
    storyPrompt: "Gebruik wat je hebt geleerd over dieren om een kort verhaal te schrijven!",
    storyPlaceholder: "Er was eens in het bos...",
    saveStory: "Verhaal opslaan",
    
    // Feedback messages
    gameComplete: "Gefeliciteerd! Je hebt het spel voltooid in {attempts} pogingen en {time} seconden!",
    storySaved: "Geweldig gedaan! Je dierenverhaal is opgeslagen! ({timestamp})",
    storyError: "Schrijf eerst een verhaal voordat je opslaat!"
  },
  
  lt: {
    // Page title and header
    title: "Gyvūnų detektyvai - Atminties žaidimas pradinei mokyklai",
    gameTitle: "Gyvūnų detektyvai",
    gameSubtitle: "Susieti gyvūnų vardus su jų buveinėmis ir savybėmis!",
    
    // Language selector
    selectLanguage: "Pasirinkti kalbą:",
    
    // How to play section
    howToPlay: "Kaip žaisti",
    instruction1: "1. Apverskite korteles, kad surastumėte tinkančius gyvūnų vardus, buveines ir savybes.",
    instruction2: "2. Susieti visus rinkinius, kad užbaigtumėte žaidimą.",
    instruction3: "3. Naudokite tai, ko išmokote, kad parašytumėte istoriją apie savo mėgstamus gyvūnus!",
    
    // Level selection
    selectLevel: "Pasirinkti lygį:",
    easyLevel: "Lengvas (1-2 klasė)",
    advancedLevel: "Pažengę (3-4 klasė)",
    
    // Game stats
    pairsFound: "Rasta porų",
    attempts: "Bandymai",
    time: "Laikas",
    seconds: "s",
    
    // Controls
    restartGame: "Paleisti iš naujo",
    writeStory: "Rašyti istoriją",
    
    // Animal data - Easy level
    easyAnimals: [
      { name: "Liūtas", habitat: "Savana", characteristic: "Džiunglių karalius" },
      { name: "Dramblys", habitat: "Pievos", characteristic: "Turi straublį" },
      { name: "Žirafa", habitat: "Miškas", characteristic: "Ilgas kaklas" },
      { name: "Pingvinas", habitat: "Antarktida", characteristic: "Juodas ir baltas" }
    ],
    
    // Animal data - Hard level
    hardAnimals: [
      { name: "Tigras", habitat: "Džiunglės", characteristic: "Oranžinis su dryžiais" },
      { name: "Baltasis lokys", habitat: "Arktika", characteristic: "Baltas kailis" },
      { name: "Kengūra", habitat: "Australija", characteristic: "Turi kišenę" },
      { name: "Delfinas", habitat: "Vandenynas", characteristic: "Kvėpuoja oru" },
      { name: "Erelis", habitat: "Kalnai", characteristic: "Aštrus nagus" },
      { name: "Varlė", habitat: "Tvenkinys", characteristic: "Gali toli šokti" }
    ],
    
    // Card labels
    habitat: "Buveinė",
    trait: "Savybė",
    
    // Animal info
    animalFacts: "Gyvūnų faktai",
    
    // Story section
    createStory: "Sukurkite savo gyvūnų istoriją",
    storyPrompt: "Naudokite tai, ko išmokote apie gyvūnus, kad parašytumėte trumpą istoriją!",
    storyPlaceholder: "Kažkada miške...",
    saveStory: "Išsaugoti istoriją",
    
    // Feedback messages
    gameComplete: "Sveikiname! Užbaigėte žaidimą per {attempts} bandymus ir {time} sekundžių!",
    storySaved: "Puikus darbas! Jūsų gyvūnų istorija išsaugota! ({timestamp})",
    storyError: "Prašome parašyti istoriją prieš išsaugojimą!"
  }
};

// Current language
let currentLanguage = 'en';

// Function to get translated text
function getText(key) {
  return translations[currentLanguage][key] || translations['en'][key] || key;
}

// Function to change language
function changeLanguage(lang) {
  if (translations[lang]) {
    currentLanguage = lang;
    updateUI();
    initGame();
  }
}

// Function to update UI text
function updateUI() {
  // Update page title
  document.title = getText('title');
  
  // Update header
  document.querySelector('h1').textContent = getText('gameTitle');
  document.querySelector('header p').textContent = getText('gameSubtitle');
  
  // Update language selector
  document.querySelector('.language-selector h3').textContent = getText('selectLanguage');
  
  // Update how to play section
  document.querySelector('.info-section h2').textContent = getText('howToPlay');
  const instructions = document.querySelectorAll('.info-section p');
  instructions[0].textContent = getText('instruction1');
  instructions[1].textContent = getText('instruction2');
  instructions[2].textContent = getText('instruction3');
  
  // Update level selection
  document.querySelector('.level-select h3').textContent = getText('selectLevel');
  document.getElementById('easy-btn').textContent = getText('easyLevel');
  document.getElementById('hard-btn').textContent = getText('advancedLevel');
  
  // Update stats
  document.getElementById('pairs-found').textContent = `${getText('pairsFound')}: 0`;
  document.getElementById('attempts').textContent = `${getText('attempts')}: 0`;
  document.getElementById('timer').textContent = `${getText('time')}: 0${getText('seconds')}`;
  
  // Update controls
  document.getElementById('restart-btn').textContent = getText('restartGame');
  document.getElementById('story-btn').textContent = getText('writeStory');
  
  // Update animal info
  document.querySelector('#animal-info h3').textContent = getText('animalFacts');
  
  // Update story section
  document.querySelector('#story-section h2').textContent = getText('createStory');
  document.querySelector('#story-section p').textContent = getText('storyPrompt');
  document.getElementById('story-textarea').placeholder = getText('storyPlaceholder');
  document.getElementById('save-story').textContent = getText('saveStory');
}

// Initialize language selector
function initLanguageSelector() {
  const languageSelector = document.querySelector('.language-selector');
  const languages = [
    { code: 'en', name: ' 🇬🇧 English' },
    { code: 'tr', name: ' 🇹🇷 Türkçe' },
    { code: 'pl', name: ' 🇵🇱 Polski' },
    { code: 'nl', name: ' 🇳🇱 Nederlands' },
    { code: 'lt', name: ' 🇱🇹 Lietuvių' }
  ];
  
  languages.forEach(lang => {
    const btn = document.createElement('button');
    btn.className = 'language-btn';
    btn.textContent = lang.name;
    btn.onclick = () => {
      // Remove active class from all buttons
      document.querySelectorAll('.language-btn').forEach(b => b.classList.remove('active'));
      // Add active class to clicked button
      btn.classList.add('active');
      // Change language
      changeLanguage(lang.code);
    };
    
    if (lang.code === currentLanguage) {
      btn.classList.add('active');
    }
    
    languageSelector.appendChild(btn);
  });
}